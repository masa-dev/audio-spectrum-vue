(function(){"use strict";var t={9393:function(t,e,a){var i=a(8935),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("BasicAudioVisualiser"),a("InputParams"),a("BackgroundImage",{attrs:{imageUrl:t.inputState.imageFileUrl,width:t.inputState.imageWidth}}),a("div",{staticClass:"show-control-icon",attrs:{title:"詳細設定"},on:{click:function(e){t.inputState.showInputs=!t.inputState.showInputs}}},[a("b-icon-gear-fill")],1)],1)},n=[],l=a(3796),o=a(3254),r=a(6166),u=a.n(r),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"canvas-wrapper"},[a("canvas",{attrs:{id:"basic-visualiser",width:"500",height:"200"}}),a("div",[t._v(" "+t._s(t.mediaUrl)+" "),a("button",{on:{click:function(e){return t.play()}}},[t._v("start")]),a("button",{on:{click:function(e){return t.playOrPause()}}},[t._v(t._s(t.btnText))])])])},d=[],h=(a(8675),a(3462),a(7380),a(1118),function(t,e,a,i){var s,n=arguments.length,l=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(t,e,a,i);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(l=(n<3?s(l):n>3?s(e,a,l):s(e,a))||l);return n>3&&l&&Object.defineProperty(e,a,l),l});let p=class extends o.w3{constructor(...t){super(...t),(0,l.Z)(this,"mediaUrl",void 0),(0,l.Z)(this,"canvasEl",null),(0,l.Z)(this,"canvasCtx",null),(0,l.Z)(this,"audioCtx",new AudioContext),(0,l.Z)(this,"analyserNode",this.audioCtx.createAnalyser()),(0,l.Z)(this,"gainNode",new GainNode(this.audioCtx)),(0,l.Z)(this,"sourceNode",this.audioCtx.createBufferSource()),(0,l.Z)(this,"mediaBuffer",null),(0,l.Z)(this,"isFirstPlay",!0),(0,l.Z)(this,"isPlaying",!1),(0,l.Z)(this,"btnText","start")}async getAudioArrayBuffer(t){let e=u()(t,{responseType:"arraybuffer",method:"GET"});return e}init(){this.audioCtx=new AudioContext,this.analyserNode=this.audioCtx.createAnalyser(),this.gainNode=new GainNode(this.audioCtx),this.sourceNode=this.audioCtx.createBufferSource(),this.gainNode.gain.value=.3,console.log("initted")}async play(){this.isFirstPlay||this.sourceNode.stop(),this.mediaBuffer?(this.mediaBuffer=(await this.getAudioArrayBuffer(this.mediaUrl)).data,this.init(),await this.audioCtx.decodeAudioData(this.mediaBuffer,(t=>{const e=500,a=200;this.sourceNode.buffer=t;new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.fftSize=256,this.sourceNode.connect(this.analyserNode),this.sourceNode.connect(this.gainNode).connect(this.audioCtx.destination),this.sourceNode.start(0),this.isPlaying=!1,this.analyserNode.fftSize=128;let i=this.analyserNode.frequencyBinCount;console.log(i);let s=new Uint8Array(i);console.log(s),this.canvasCtx.clearRect(0,0,e,a);let n=0,l=this.analyserNode,o=this.canvasCtx;function r(){n=requestAnimationFrame(r),l.getByteFrequencyData(s),o.fillStyle="rgb(0, 0, 0)",o.clearRect(0,0,e,a),o.fillStyle="rgb(0, 0, 0, 0)",o.fillRect(0,0,e,a);let t,u=e/i*1.3,c=0;for(let e=0;e<i;e++)t=1.5*s[e],o.fillStyle="rgb("+(t+100)+",50,50)",o.fillRect(c,a-t/2,u,t),c+=u+1}r(),this.sourceNode.onended=()=>{this.audioCtx.close(),this.isFirstPlay=!0,this.isPlaying=!1}}))):setTimeout((()=>{this.play()}),500)}playOrPause(){this.isPlaying?(this.audioCtx.suspend(),this.isPlaying=!1,this.btnText="start"):(this.audioCtx.resume(),this.isPlaying=!0,this.btnText="stop")}async mounted(){this.canvasEl=document.getElementById("basic-visualiser"),this.canvasCtx=this.canvasEl.getContext("2d"),this.mediaBuffer=(await this.getAudioArrayBuffer(this.mediaUrl)).data,this.gainNode.gain.value=.2}};h([(0,o.fI)({type:String,default:""})],p.prototype,"mediaUrl",void 0),p=h([o.wA],p);var f=p,v=f,m=a(1001),g=(0,m.Z)(v,c,d,!1,null,null,null),y=g.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("canvas",{attrs:{id:"visualiser-canvas",width:t.visualWidth,height:t.visualHeight}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isDisplayControlPanel,expression:"isDisplayControlPanel"}],attrs:{id:"audio-control-panel"}},[a("div",{staticClass:"d-flex flex-wrap justify-content-center"},[a("div",{staticClass:"flex-column-center"},[t.playState.playing?t._e():a("button",{staticClass:"control-btn",attrs:{id:"play-btn"},on:{click:t.play}},[a("b-icon-play-fill")],1)]),a("div",{staticClass:"flex-column-center"},[t.playState.playing?a("button",{staticClass:"control-btn",attrs:{id:"pause-btn"},on:{click:t.pause}},[a("b-icon-pause-fill")],1):t._e()]),a("div",{staticClass:"flex-column-center"},[a("button",{staticClass:"control-btn",attrs:{id:"stop-btn"},on:{click:t.stop}},[a("b-icon-stop-fill")],1)]),a("div",{staticClass:"flex-column-center px-3"},[t.playState.durationTime&&t.playState.currentTime?a("div",[t._v(" "+t._s(t.parseTimeToString(t.playState.currentTime,"m:ss"))+" / "+t._s(t.parseTimeToString(t.playState.durationTime,"m:ss"))+" ")]):a("div",[t._v(" "+t._s(t.parseTimeToString(0,"m:ss"))+" / "+t._s(t.parseTimeToString(0,"m:ss"))+" ")])]),a("div",{staticClass:"flex-column-center mx-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.state.visualiserType,expression:"state.visualiserType"}],staticClass:"form-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.state,"visualiserType",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"simple-bar",selected:""}},[t._v("Simple Bar")]),a("option",{attrs:{value:"bold-bar"}},[t._v("Bold Bar")]),a("option",{attrs:{value:"line-bar"}},[t._v("Line Bar")]),a("option",{attrs:{value:"curve-bar"}},[t._v("Curve Bar")])])]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"flex-column-center"},[a("b-icon-volume-down-fill")],1),a("div",{staticClass:"flex-column-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.state.volume,expression:"state.volume"}],attrs:{type:"range",id:"volume-controller",min:"0",max:"1",step:"0.05"},domProps:{value:t.state.volume},on:{input:t.inputVolume,mousewheel:function(e){t.isHoverVolume=!1},__r:function(e){return t.$set(t.state,"volume",e.target.value)}}})]),a("div",{staticClass:"flex-column-center"},[a("b-icon-volume-up-fill")],1)])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.isDisplayControlPanel,expression:"isDisplayControlPanel === false"}],staticClass:"show-control-icon",attrs:{title:"コントロールパネルを表示する"},on:{click:function(e){return t.openControlPanel()}}},[a("b-icon-caret-up-square-fill")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.isDisplayControlPanel,expression:"isDisplayControlPanel === true"}],staticClass:"show-control-icon",attrs:{title:"コントロールパネルを非表示にする"},on:{click:function(e){return t.closeControlPanel()}}},[a("b-icon-caret-down-square-fill")],1)])},C=[],w=a(4665);i["default"].use(w.ZP);var S=new w.ZP.Store({state:{input:{imageFile:null,audioFile:null,imageFileUrl:"",visualiserType:"",delayTime:0,barColor:"",savedBarColor:"",showInputs:!1,volume:.2,imageWidth:1,canvasWidth:1},play:{startedAt:0,pausedAt:0,currentTime:0,playing:!1,durationTime:0},remainBars:[]},getters:{},mutations:{},actions:{},modules:{}});function x(t,e,a,i=!1,s,n){if(t.beginPath(),_(t,T(e,a,i,s)),n){t.beginPath();for(let a=0;a<e.length-1;a+=2)t.rect(e[a]-2,e[a+1]-2,4,4)}t.stroke()}function _(t,e){t.moveTo(e[0],e[1]),t.strokeStyle="#00000000";for(let a=2;a<e.length-1;a+=2)t.lineTo(e[a],e[a+1])}function T(t,e,a,i){e=e||.5,a=a||!1,i=i||16;let s=[];const n=[];let l,o,r,u,c,d,h,p,f,v,m,g,y;for(s=t.slice(0),a?(s.unshift(t[t.length-1]),s.unshift(t[t.length-2]),s.unshift(t[t.length-1]),s.unshift(t[t.length-2]),s.push(t[0]),s.push(t[1])):(s.unshift(t[1]),s.unshift(t[0]),s.push(t[t.length-2]),s.push(t[t.length-1])),y=2;y<s.length-4;y+=2)for(g=0;g<=i;g++)r=(s[y+2]-s[y-2])*e,u=(s[y+4]-s[y])*e,c=(s[y+3]-s[y-1])*e,d=(s[y+5]-s[y+1])*e,m=g/i,h=2*Math.pow(m,3)-3*Math.pow(m,2)+1,p=-2*Math.pow(m,3)+3*Math.pow(m,2),f=Math.pow(m,3)-2*Math.pow(m,2)+m,v=Math.pow(m,3)-Math.pow(m,2),l=h*s[y]+p*s[y+2]+f*r+v*u,o=h*s[y+1]+p*s[y+3]+f*c+v*d,n.push(l),n.push(o);return n}function B(t,e,a){let i=0;for(let s=e;s<=a;s++)i+=t[s];return i/(a-e+1)}function N(t,e,a,i,s,n,l){e.getByteFrequencyData(i),t.fillStyle="rgb(0, 0, 0)",t.clearRect(0,0,s,n),t.fillStyle="rgb(0, 0, 0, 0)",t.fillRect(0,0,s,n);const o=s/a*1.1;let r,u=0;for(let c=0;c<a;c++)r=i[c]/128*n*.9,t.fillStyle=l,t.fillRect(u,n-r/2,o,r),u+=o}function A(t,e,a,i,s,n,l){e.getByteFrequencyData(i),t.fillStyle="rgb(0, 0, 0)",t.clearRect(0,0,s,n),t.fillStyle="rgb(0, 0, 0, 0)",t.fillRect(0,0,s,n);const o=32,r=s/o*.9,u=a/o;let c=0;for(let d=0;d<o;d++){const e=B(i,d*u,(d+1)*u),a=e/128*n*.9;t.fillStyle=l,t.fillRect(c,n-a/2,r,a),c+=r+1}}function P(t,e,a,i,s,n,l){e.getByteFrequencyData(i),t.fillStyle="rgb(0, 0, 0)",t.clearRect(0,0,s,n),t.fillStyle="rgb(0, 0, 0, 0)",t.fillRect(0,0,s,n);const o=16,r=s/o*.9,u=a/o;let c=0;for(let d=0;d<o;d++){const e=B(i,d*u,(d+1)*u),a=Math.floor(e/10);for(let i=0;i<a;i++){const e=n-20*i+10;t.beginPath(),t.moveTo(c,e),t.lineTo(c+r,e),t.strokeStyle=l,t.lineWidth=10,t.stroke()}if(S.state.remainBars[d]){const e=S.state.remainBars[d];if(e.count>a){(new Date).getTime()-e.lastUpdate.getTime()>100&&(S.state.remainBars[d]={count:e.count-1,lastUpdate:new Date});const a=n-20*(e.count-1)+10;t.beginPath(),t.moveTo(c,a),t.lineTo(c+r,a),t.strokeStyle=l,t.lineWidth=10,t.stroke()}else S.state.remainBars[d]={count:a,lastUpdate:new Date}}else S.state.remainBars[d]={count:a,lastUpdate:new Date};c+=r+10}}function R(t,e,a,i,s,n,l){e.getByteFrequencyData(i),t.fillStyle="rgb(0, 0, 0)",t.clearRect(0,0,s,n),t.fillStyle="rgb(0, 0, 0, 0)",t.fillRect(0,0,s,n);const o=32,r=s/o*1,u=a/o,c=[],d=[];for(let h=0;h<o;h++){const t=B(i,h*u,(h+1)*u),e=t/128*n*.9;d.push((h+1)*r,n-e/2)}d.unshift(0,d[1]),t.beginPath(),t.moveTo(0,n),t.lineTo(0,n-d[1]),x(t,d,1),t.lineTo(r*(c.length-1),n),t.lineTo(0,n),t.fillStyle=l,t.fill()}var k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"image-blur-wrapper",style:t.backgroundStyle}),a("div",{staticClass:"image-wrapper",style:t.backgroundStyle})])},Z=[],F=function(t,e,a,i){var s,n=arguments.length,l=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(t,e,a,i);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(l=(n<3?s(l):n>3?s(e,a,l):s(e,a))||l);return n>3&&l&&Object.defineProperty(e,a,l),l};let W=class extends i["default"]{constructor(...t){super(...t),(0,l.Z)(this,"imageUrl",void 0),(0,l.Z)(this,"width",void 0)}get getImageUrl(){const t="/audio-spectrum-vue/img/party.png";return this.imageUrl?this.imageUrl:t}get getImageWidth(){return this.width>1&&this.width<0?1:this.width}get backgroundStyle(){const t={"background-image":`url("${this.getImageUrl}")`,width:100*this.width+"%",left:50-50*this.width+"%"};return t}};F([(0,o.fI)({type:String,default:"/audio-spectrum-vue/img/party.png"})],W.prototype,"imageUrl",void 0),F([(0,o.fI)({type:Number,default:1})],W.prototype,"width",void 0),W=F([o.wA],W);var O=W,I=O,U=(0,m.Z)(I,k,Z,!1,null,null,null),D=U.exports;function j(t,e){const a=t<0;t=Math.abs(a?t-1:t);const i={hours:Math.floor(t/1440),minutes:Math.floor(t/60%24),seconds:Math.floor(t%60)},s=e.replace("HH",$(i.hours)).replace("hh",$(i.hours)).replace("mm",$(i.minutes)).replace("SS",$(i.seconds)).replace("ss",$(i.seconds)).replace("H",i.hours.toString()).replace("h",i.hours.toString()).replace("m",i.minutes.toString()).replace("S",i.seconds.toString()).replace("s",i.seconds.toString());return`${a?"-":""}${s}`}function $(t){const e="00"+t.toString();return e.slice(-2)}var H=function(t,e,a,i){var s,n=arguments.length,l=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(t,e,a,i);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(l=(n<3?s(l):n>3?s(e,a,l):s(e,a))||l);return n>3&&l&&Object.defineProperty(e,a,l),l};let E=class extends o.w3{constructor(...t){super(...t),(0,l.Z)(this,"state",this.$store.state.input),(0,l.Z)(this,"playState",this.$store.state.play),(0,l.Z)(this,"visualWidth",100),(0,l.Z)(this,"visualHeight",100),(0,l.Z)(this,"canvasEl",null),(0,l.Z)(this,"canvasCtx",null),(0,l.Z)(this,"audioCtx",new AudioContext),(0,l.Z)(this,"analyserNode",this.audioCtx.createAnalyser()),(0,l.Z)(this,"gainNode",new GainNode(this.audioCtx)),(0,l.Z)(this,"sourceNode",this.audioCtx.createBufferSource()),(0,l.Z)(this,"audioBuffer",null),(0,l.Z)(this,"parseTimeToString",j),(0,l.Z)(this,"isDisplayControlPanel",!0),(0,l.Z)(this,"isHoverVolume",!1)}onChangeStateVolume(){this.gainNode.gain.value=this.state.volume}onChangeCanvasWidth(){this.resizeCanvas()}onAudioChange(){this.playState.playing&&this.playState.pausedAt>0&&this.stop()}mounted(){this.canvasEl=document.getElementById("visualiser-canvas"),this.canvasCtx=this.canvasEl.getContext("2d"),this.gainNode.gain.value=this.state.volume,this.resizeCanvas(),window.onresize=()=>{this.resizeCanvas()},window.onwheel=t=>{this.isHoverVolume&&(t.deltaY<0&&this.state.volume<1?this.state.volume+=.05:t.deltaY>0&&this.state.volume>0&&(this.state.volume-=.05))},setInterval((()=>{this.playState.durationTime=this.audioBuffer?this.audioBuffer.duration:0,0!==this.playState.pausedAt?this.playState.currentTime=this.playState.pausedAt:0!==this.playState.startedAt?this.playState.currentTime=this.audioCtx.currentTime-this.playState.startedAt:this.playState.currentTime=0}),100)}resizeCanvas(){this.visualWidth=window.innerWidth*this.state.canvasWidth,this.isDisplayControlPanel?this.visualHeight=window.innerHeight-150:this.visualHeight=window.innerHeight}inputVolume(t){const e=t.target;this.state.volume=parseFloat(e.value),this.gainNode.gain.value=this.state.volume}closeControlPanel(){this.isDisplayControlPanel=!1,this.resizeCanvas()}openControlPanel(){this.isDisplayControlPanel=!0,this.resizeCanvas()}initAudioInstances(){const t=this.gainNode.gain.value;this.audioCtx=new AudioContext,this.analyserNode=this.audioCtx.createAnalyser(),this.sourceNode=this.audioCtx.createBufferSource(),this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=t}get durationTime(){return this.audioBuffer?this.audioBuffer.duration:0}pause(){let t=this.audioCtx.currentTime+Math.abs(this.playState.startedAt);this.stop(),this.playState.pausedAt=t}stop(){this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode.stop(),this.sourceNode=this.audioCtx.createBufferSource()),this.playState.pausedAt=0,this.playState.startedAt=0,this.playState.playing=!1}async play(){if(null===this.state.audioFile||void 0===this.state.audioFile)return void alert("音声ファイルが入力されていません");const t=this,e=this.playState.pausedAt;this.initAudioInstances();const a=document.getElementById("audio-input");this.audioBuffer=null,this.audioBuffer=await this.audioCtx.decodeAudioData(await a.files[0].arrayBuffer()),this.sourceNode.buffer=this.audioBuffer,this.sourceNode.connect(this.analyserNode),this.sourceNode.connect(this.gainNode).connect(this.audioCtx.destination);let i=0;this.sourceNode.start(this.state.delayTime,e),console.log("started"),this.sourceNode.onended=()=>{console.log("ended"),cancelAnimationFrame(i),l.fillStyle="rgb(0, 0, 0)",l.clearRect(0,0,this.visualWidth,this.visualHeight),l.fillStyle="rgb(0, 0, 0, 0)",l.fillRect(0,0,this.visualWidth,this.visualHeight),this.stop()},this.playState.startedAt=this.audioCtx.currentTime-e+this.state.delayTime,this.playState.pausedAt=0,this.playState.playing=!0,this.analyserNode.fftSize=1024;const s=this.analyserNode.frequencyBinCount,n=new Uint8Array(s),l=this.canvasCtx,o=this.analyserNode;function r(){i=requestAnimationFrame(r),"simple-bar"===t.state.visualiserType?N(l,o,s,n,t.visualWidth,t.visualHeight,t.state.barColor):"bold-bar"===t.state.visualiserType?A(l,o,s,n,t.visualWidth,t.visualHeight,t.state.barColor):"line-bar"===t.state.visualiserType?P(l,o,s,n,t.visualWidth,t.visualHeight,t.state.barColor):"curve-bar"===t.state.visualiserType&&R(l,o,s,n,t.visualWidth,t.visualHeight,t.state.barColor)}l.clearRect(0,0,this.visualWidth,this.visualHeight),r()}};H([(0,o.RL)("state.volume")],E.prototype,"onChangeStateVolume",null),H([(0,o.RL)("state.canvasWidth")],E.prototype,"onChangeCanvasWidth",null),H([(0,o.RL)("state.audioFile")],E.prototype,"onAudioChange",null),E=H([(0,o.wA)({components:{BackgroundImage:D}})],E);var M=E,V=M,q=(0,m.Z)(V,b,C,!1,null,null,null),z=q.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.state.showInputs,expression:"state.showInputs"}],staticClass:"input-params"},[a("div",{staticClass:"mb-3 close-input"},[a("div",{staticClass:"cancel-icon-wrapper",on:{click:t.closeInputs}},[a("b-icon-x-lg")],1)]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"mb-1"},[t._v("背景画像")]),a("div",{staticClass:"file has-name"},[a("label",{staticClass:"file-label"},[a("input",{staticClass:"file-input",attrs:{type:"file",name:"resume",accept:"image/*"},on:{input:t.inputImage}}),t._m(0),a("span",{staticClass:"file-name"},[t._v(" "+t._s(t.state.imageFile?t.state.imageFile.name:"No Select")+" ")])])])]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"mb-1"},[t._v("再生音楽")]),a("div",{staticClass:"file has-name"},[a("label",{staticClass:"file-label"},[a("input",{staticClass:"file-input",attrs:{id:"audio-input",type:"file",name:"resume",accept:"audio/*"},on:{input:t.inputAudio}}),t._m(1),a("span",{staticClass:"file-name"},[t._v(" "+t._s(t.state.audioFile?t.state.audioFile.name:"No Select")+" ")])])])]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"mb-1"},[t._v("ビジュアライザーの種類")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.state.visualiserType,expression:"state.visualiserType"}],staticClass:"form-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.state,"visualiserType",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"simple-bar",selected:""}},[t._v("Simple Bar")]),a("option",{attrs:{value:"bold-bar"}},[t._v("Bold Bar")]),a("option",{attrs:{value:"line-bar"}},[t._v("Line Bar")]),a("option",{attrs:{value:"curve-bar"}},[t._v("Curve Bar")])])]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"mb-1"},[t._v("開始遅延")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.state.delayTime,expression:"state.delayTime",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",min:"0"},domProps:{value:t.state.delayTime},on:{input:function(e){e.target.composing||t.$set(t.state,"delayTime",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"mb-3 row py-2"},[a("label",{staticClass:"mb-1"},[t._v("音量")]),a("div",{staticClass:"col-1"},[a("b-icon-volume-down-fill")],1),a("div",{staticClass:"flex-column-center col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.state.volume,expression:"state.volume"}],attrs:{type:"range",id:"volume-controller",min:"0",max:"1",step:"0.05"},domProps:{value:t.state.volume},on:{input:t.inputVolume,mouseover:function(e){t.isHoverVolume=!0},mouseleave:function(e){t.isHoverVolume=!1},__r:function(e){return t.$set(t.state,"volume",e.target.value)}}})]),a("div",{staticClass:"col-1"},[a("b-icon-volume-up-fill")],1)]),t._m(2),a("div",{staticClass:"mb-3"},[a("label",[t._v("ビジュアライザーの幅: "+t._s(parseInt(100*t.state.canvasWidth))+"%")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.state.canvasWidth,expression:"state.canvasWidth",modifiers:{number:!0}}],staticClass:"form-range",attrs:{type:"range",max:"1",min:"0",step:"0.01"},domProps:{value:t.state.canvasWidth},on:{__r:function(e){t.$set(t.state,"canvasWidth",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"mb-1"},[t._v("画像の幅: "+t._s(parseInt(100*t.state.imageWidth))+"%")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.state.imageWidth,expression:"state.imageWidth",modifiers:{number:!0}}],staticClass:"form-range",attrs:{type:"range",max:"1",min:"0",step:"0.01"},domProps:{value:t.state.imageWidth},on:{__r:function(e){t.$set(t.state,"imageWidth",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"mb-1"},[t._v("画像の幅の自動調整")]),a("div",[a("button",{staticClass:"btn btn-secondary",attrs:{disabled:!t.state.imageFile},on:{click:t.autoScale}},[t._v(" 画像幅の自動調整 ")])])])])},L=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"file-cta"},[a("span",{staticClass:"file-icon"},[a("i",{staticClass:"fas fa-upload"})]),a("span",{staticClass:"file-label"},[t._v(" Choose a file… ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"file-cta"},[a("span",{staticClass:"file-icon"},[a("i",{staticClass:"fas fa-upload"})]),a("span",{staticClass:"file-label"},[t._v(" Choose a file… ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3"},[a("label",{staticClass:"mb-1"},[t._v("バーの色")]),a("div",{staticClass:"d-block"},[a("div",{attrs:{id:"color-picker"}})])])}],Y=a(4638),X=a.n(Y),J=function(t,e,a,i){var s,n=arguments.length,l=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(t,e,a,i);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(l=(n<3?s(l):n>3?s(e,a,l):s(e,a))||l);return n>3&&l&&Object.defineProperty(e,a,l),l};const K={el:"#color-picker",theme:"classic",swatches:["rgba(244, 231, 54, 0.7)","rgba(244, 67, 54, 0.6)","rgba(244, 54, 171, 0.7)","rgba(103, 58, 183, 0.85)","rgba(63, 81, 181, 0.8)","rgba(0, 188, 212, 0.7)","rgba(33, 202, 111, 0.7)"],default:"#F5732499",components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,input:!0,save:!0}}};let Q=class extends o.w3{constructor(...t){super(...t),(0,l.Z)(this,"state",this.$store.state.input),(0,l.Z)(this,"pickr",null),(0,l.Z)(this,"isHoverVolume",!1)}inputImage(t){const e=new FileReader,a=t.target;a.files?(this.state.imageFile=a.files[0],e.readAsDataURL(this.state.imageFile),e.onload=()=>{this.state.imageFileUrl=e.result}):this.state.imageFileUrl=""}autoScale(){if(this.state.imageFile){const t=new Image;t.onload=()=>{const e=t.naturalWidth,a=t.naturalHeight,i=window.innerWidth,s=window.innerHeight,n=e*s/(a*i);this.state.imageWidth=n>1?1:n,URL.revokeObjectURL(t.src)},t.src=URL.createObjectURL(this.state.imageFile)}}inputAudio(t){const e=t.target;e.files&&(this.state.audioFile=e.files[0])}closeInputs(){this.state.showInputs=!1}inputVolume(t){const e=t.target;this.state.volume=parseFloat(e.value)}mounted(){this.state.visualiserType="simple-bar",this.state.barColor="#F5732499",this.state.savedBarColor="#F5732499",this.state.showInputs=!0,o.w3.nextTick((()=>{this.pickr=X().create(K),this.pickr.on("save",(t=>{this.state.barColor=t.toRGBA().toString(),this.state.savedBarColor=t.toRGBA().toString(),this.pickr.hide()})),this.pickr.on("change",(t=>{console.log(t),this.state.barColor=t.toRGBA().toString()})),this.pickr.on("cancel",(()=>{this.state.barColor=this.state.savedBarColor})),this.pickr.on("hide",(()=>{this.state.barColor=this.state.savedBarColor}))})),window.onwheel=t=>{this.isHoverVolume&&(t.deltaY<0&&this.state.volume<1?this.state.volume+=.05:t.deltaY>0&&this.state.volume>0&&(this.state.volume-=.05))}}};Q=J([o.wA],Q);var tt=Q,et=tt,at=(0,m.Z)(et,G,L,!1,null,"7eb317b9",null),it=at.exports,st=function(t,e,a,i){var s,n=arguments.length,l=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(t,e,a,i);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(l=(n<3?s(l):n>3?s(e,a,l):s(e,a))||l);return n>3&&l&&Object.defineProperty(e,a,l),l};let nt=class extends o.w3{constructor(...t){super(...t),(0,l.Z)(this,"inputState",this.$store.state.input),(0,l.Z)(this,"canvasEl",null)}async getAudioArrayBuffer(t){let e=u()(t,{responseType:"arraybuffer",method:"GET"});return e}};nt=st([(0,o.wA)({components:{BasicAudioVisualiserTest:y,BasicAudioVisualiser:z,InputParams:it,BackgroundImage:D}})],nt);var lt=nt,ot=lt,rt=(0,m.Z)(ot,s,n,!1,null,"4bd65ec2",null),ut=rt.exports,ct=a(8262),dt=a(3266);a(44);i["default"].use(ct.XG7),i["default"].use(dt.A7),i["default"].config.productionTip=!1,new i["default"]({store:S,render:t=>t(ut)}).$mount("#app")}},e={};function a(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,i,s,n){if(!i){var l=1/0;for(c=0;c<t.length;c++){i=t[c][0],s=t[c][1],n=t[c][2];for(var o=!0,r=0;r<i.length;r++)(!1&n||l>=n)&&Object.keys(a.O).every((function(t){return a.O[t](i[r])}))?i.splice(r--,1):(o=!1,n<l&&(l=n));if(o){t.splice(c--,1);var u=s();void 0!==u&&(e=u)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[i,s,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,n,l=i[0],o=i[1],r=i[2],u=0;if(l.some((function(e){return 0!==t[e]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(r)var c=r(a)}for(e&&e(i);u<l.length;u++)n=l[u],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(c)},i=self["webpackChunkaudio_spectrum"]=self["webpackChunkaudio_spectrum"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(9393)}));i=a.O(i)})();
//# sourceMappingURL=app.59b0e5ce.js.map