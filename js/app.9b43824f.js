(function(){"use strict";var t={7899:function(t,e,i){var a=i(8935),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("BasicAudioVisualiser"),i("InputParams"),i("BackgroundImage",{attrs:{imageUrl:t.inputState.imageFileUrl,width:t.inputState.imageWidth}}),i("div",{staticClass:"show-control-icon",attrs:{title:"詳細設定"},on:{click:function(e){t.inputState.showInputs=!t.inputState.showInputs}}},[i("b-icon-gear-fill")],1)],1)},n=[],l=i(3796),o=i(3254),r=i(6166),u=i.n(r),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"canvas-wrapper"},[i("canvas",{attrs:{id:"basic-visualiser",width:"500",height:"200"}}),i("div",[t._v(" "+t._s(t.mediaUrl)+" "),i("button",{on:{click:function(e){return t.play()}}},[t._v("start")]),i("button",{on:{click:function(e){return t.playOrPause()}}},[t._v(t._s(t.btnText))])])])},d=[],h=(i(8675),i(3462),i(7380),i(1118),function(t,e,i,a){var s,n=arguments.length,l=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(l=(n<3?s(l):n>3?s(e,i,l):s(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l});let f=class extends o.w3{constructor(...t){super(...t),(0,l.Z)(this,"mediaUrl",void 0),(0,l.Z)(this,"canvasEl",null),(0,l.Z)(this,"canvasCtx",null),(0,l.Z)(this,"audioCtx",new AudioContext),(0,l.Z)(this,"analyserNode",this.audioCtx.createAnalyser()),(0,l.Z)(this,"gainNode",new GainNode(this.audioCtx)),(0,l.Z)(this,"sourceNode",this.audioCtx.createBufferSource()),(0,l.Z)(this,"mediaBuffer",null),(0,l.Z)(this,"isFirstPlay",!0),(0,l.Z)(this,"isPlaying",!1),(0,l.Z)(this,"btnText","start")}async getAudioArrayBuffer(t){let e=u()(t,{responseType:"arraybuffer",method:"GET"});return e}init(){this.audioCtx=new AudioContext,this.analyserNode=this.audioCtx.createAnalyser(),this.gainNode=new GainNode(this.audioCtx),this.sourceNode=this.audioCtx.createBufferSource(),this.gainNode.gain.value=.3,console.log("initted")}async play(){this.isFirstPlay||this.sourceNode.stop(),this.mediaBuffer?(this.mediaBuffer=(await this.getAudioArrayBuffer(this.mediaUrl)).data,this.init(),await this.audioCtx.decodeAudioData(this.mediaBuffer,(t=>{const e=500,i=200;this.sourceNode.buffer=t;new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.fftSize=256,this.sourceNode.connect(this.analyserNode),this.sourceNode.connect(this.gainNode).connect(this.audioCtx.destination),this.sourceNode.start(0),this.isPlaying=!1,this.analyserNode.fftSize=128;let a=this.analyserNode.frequencyBinCount;console.log(a);let s=new Uint8Array(a);console.log(s),this.canvasCtx.clearRect(0,0,e,i);let n=0,l=this.analyserNode,o=this.canvasCtx;function r(){n=requestAnimationFrame(r),l.getByteFrequencyData(s),o.fillStyle="rgb(0, 0, 0)",o.clearRect(0,0,e,i),o.fillStyle="rgb(0, 0, 0, 0)",o.fillRect(0,0,e,i);let t,u=e/a*1.3,c=0;for(let e=0;e<a;e++)t=1.5*s[e],o.fillStyle="rgb("+(t+100)+",50,50)",o.fillRect(c,i-t/2,u,t),c+=u+1}r(),this.sourceNode.onended=()=>{this.audioCtx.close(),this.isFirstPlay=!0,this.isPlaying=!1}}))):setTimeout((()=>{this.play()}),500)}playOrPause(){this.isPlaying?(this.audioCtx.suspend(),this.isPlaying=!1,this.btnText="start"):(this.audioCtx.resume(),this.isPlaying=!0,this.btnText="stop")}async mounted(){this.canvasEl=document.getElementById("basic-visualiser"),this.canvasCtx=this.canvasEl.getContext("2d"),this.mediaBuffer=(await this.getAudioArrayBuffer(this.mediaUrl)).data,this.gainNode.gain.value=.2}};h([(0,o.fI)({type:String,default:""})],f.prototype,"mediaUrl",void 0),f=h([o.wA],f);var v=f,p=v,m=i(1001),g=(0,m.Z)(p,c,d,!1,null,null,null),y=g.exports,b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("canvas",{attrs:{id:"visualiser-canvas",width:t.visualWidth,height:t.visualHeight}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isDisplayControlPanel,expression:"isDisplayControlPanel"}],attrs:{id:"audio-control-panel"}},[i("div",{staticClass:"d-flex justify-content-center"},[i("div",{staticClass:"flex-column-center"},[i("button",{attrs:{id:"play-btn"},on:{click:t.play}},[i("b-icon-play-fill")],1)]),i("div",{staticClass:"flex-column-center mx-4"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.state.visualiserType,expression:"state.visualiserType"}],staticClass:"form-select",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.state,"visualiserType",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"simple-bar",selected:""}},[t._v("Simple Bar")]),i("option",{attrs:{value:"bold-bar"}},[t._v("Bold Bar")]),i("option",{attrs:{value:"line-bar"}},[t._v("Line Bar")]),i("option",{attrs:{value:"curve-bar"}},[t._v("Curve Bar")])])]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"flex-column-center"},[i("b-icon-volume-down-fill")],1),i("div",{staticClass:"flex-column-center"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.state.volume,expression:"state.volume"}],attrs:{type:"range",id:"volume-controller",min:"0",max:"1",step:"0.05"},domProps:{value:t.state.volume},on:{input:t.inputVolume,mousewheel:function(e){t.isHoverVolume=!1},__r:function(e){return t.$set(t.state,"volume",e.target.value)}}})]),i("div",{staticClass:"flex-column-center"},[i("b-icon-volume-up-fill")],1)])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.isDisplayControlPanel,expression:"isDisplayControlPanel === false"}],staticClass:"show-control-icon",attrs:{title:"コントロールパネルを表示する"},on:{click:function(e){return t.openControlPanel()}}},[i("b-icon-caret-up-square-fill")],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.isDisplayControlPanel,expression:"isDisplayControlPanel === true"}],staticClass:"show-control-icon",attrs:{title:"コントロールパネルを非表示にする"},on:{click:function(e){return t.closeControlPanel()}}},[i("b-icon-caret-down-square-fill")],1)])},C=[],w=i(4665);a["default"].use(w.ZP);var x=new w.ZP.Store({state:{input:{imageFile:null,audioFile:null,imageFileUrl:"",visualiserType:"",delayTime:0,barColor:"",savedBarColor:"",showInputs:!1,volume:.2,imageWidth:1,canvasWidth:1},remainBars:[]},getters:{},mutations:{},actions:{},modules:{}});function _(t,e,i,a=!1,s,n){if(t.beginPath(),B(t,N(e,i,a,s)),n){t.beginPath();for(let i=0;i<e.length-1;i+=2)t.rect(e[i]-2,e[i+1]-2,4,4)}t.stroke()}function B(t,e){t.moveTo(e[0],e[1]),t.strokeStyle="#00000000";for(let i=2;i<e.length-1;i+=2)t.lineTo(e[i],e[i+1])}function N(t,e,i,a){e=e||.5,i=i||!1,a=a||16;let s=[];const n=[];let l,o,r,u,c,d,h,f,v,p,m,g,y;for(s=t.slice(0),i?(s.unshift(t[t.length-1]),s.unshift(t[t.length-2]),s.unshift(t[t.length-1]),s.unshift(t[t.length-2]),s.push(t[0]),s.push(t[1])):(s.unshift(t[1]),s.unshift(t[0]),s.push(t[t.length-2]),s.push(t[t.length-1])),y=2;y<s.length-4;y+=2)for(g=0;g<=a;g++)r=(s[y+2]-s[y-2])*e,u=(s[y+4]-s[y])*e,c=(s[y+3]-s[y-1])*e,d=(s[y+5]-s[y+1])*e,m=g/a,h=2*Math.pow(m,3)-3*Math.pow(m,2)+1,f=-2*Math.pow(m,3)+3*Math.pow(m,2),v=Math.pow(m,3)-2*Math.pow(m,2)+m,p=Math.pow(m,3)-Math.pow(m,2),l=h*s[y]+f*s[y+2]+v*r+p*u,o=h*s[y+1]+f*s[y+3]+v*c+p*d,n.push(l),n.push(o);return n}function P(t,e,i){let a=0;for(let s=e;s<=i;s++)a+=t[s];return a/(i-e+1)}function S(t,e,i,a,s,n,l){e.getByteFrequencyData(a),t.fillStyle="rgb(0, 0, 0)",t.clearRect(0,0,s,n),t.fillStyle="rgb(0, 0, 0, 0)",t.fillRect(0,0,s,n);const o=s/i*1.1;let r,u=0;for(let c=0;c<i;c++)r=a[c]/128*n*.9,t.fillStyle=l,t.fillRect(u,n-r/2,o,r),u+=o}function T(t,e,i,a,s,n,l){e.getByteFrequencyData(a),t.fillStyle="rgb(0, 0, 0)",t.clearRect(0,0,s,n),t.fillStyle="rgb(0, 0, 0, 0)",t.fillRect(0,0,s,n);const o=32,r=s/o*.9,u=i/o;let c=0;for(let d=0;d<o;d++){const e=P(a,d*u,(d+1)*u),i=e/128*n*.9;t.fillStyle=l,t.fillRect(c,n-i/2,r,i),c+=r+1}}function A(t,e,i,a,s,n,l){e.getByteFrequencyData(a),t.fillStyle="rgb(0, 0, 0)",t.clearRect(0,0,s,n),t.fillStyle="rgb(0, 0, 0, 0)",t.fillRect(0,0,s,n);const o=16,r=s/o*.9,u=i/o;let c=0;for(let d=0;d<o;d++){const e=P(a,d*u,(d+1)*u),i=Math.floor(e/10);for(let a=0;a<i;a++){const e=n-20*a+10;t.beginPath(),t.moveTo(c,e),t.lineTo(c+r,e),t.strokeStyle=l,t.lineWidth=10,t.stroke()}if(x.state.remainBars[d]){const e=x.state.remainBars[d];if(e.count>i){(new Date).getTime()-e.lastUpdate.getTime()>100&&(x.state.remainBars[d]={count:e.count-1,lastUpdate:new Date});const i=n-20*(e.count-1)+10;t.beginPath(),t.moveTo(c,i),t.lineTo(c+r,i),t.strokeStyle=l,t.lineWidth=10,t.stroke()}else x.state.remainBars[d]={count:i,lastUpdate:new Date}}else x.state.remainBars[d]={count:i,lastUpdate:new Date};c+=r+10}}function R(t,e,i,a,s,n,l){e.getByteFrequencyData(a),t.fillStyle="rgb(0, 0, 0)",t.clearRect(0,0,s,n),t.fillStyle="rgb(0, 0, 0, 0)",t.fillRect(0,0,s,n);const o=32,r=s/o*1,u=i/o,c=[],d=[];for(let h=0;h<o;h++){const t=P(a,h*u,(h+1)*u),e=t/128*n*.9;d.push((h+1)*r,n-e/2)}d.unshift(0,d[1]),t.beginPath(),t.moveTo(0,n),t.lineTo(0,n-d[1]),_(t,d,1),t.lineTo(r*(c.length-1),n),t.lineTo(0,n),t.fillStyle=l,t.fill()}var k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"image-wrapper",style:t.backgroundStyle})},Z=[],F=function(t,e,i,a){var s,n=arguments.length,l=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(l=(n<3?s(l):n>3?s(e,i,l):s(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l};let W=class extends a["default"]{constructor(...t){super(...t),(0,l.Z)(this,"imageUrl",void 0),(0,l.Z)(this,"width",void 0)}get getImageUrl(){const t="/audio-spectrum-vue/img/party.png";return this.imageUrl?this.imageUrl:t}get getImageWidth(){return this.width>1&&this.width<0?1:this.width}get backgroundStyle(){const t={"background-image":`url("${this.getImageUrl}")`,width:100*this.width+"%",left:50-50*this.width+"%"};return t}};F([(0,o.fI)({type:String,default:"/audio-spectrum-vue/img/party.png"})],W.prototype,"imageUrl",void 0),F([(0,o.fI)({type:Number,default:1})],W.prototype,"width",void 0),W=F([o.wA],W);var O=W,I=O,U=(0,m.Z)(I,k,Z,!1,null,null,null),D=U.exports,j=function(t,e,i,a){var s,n=arguments.length,l=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(l=(n<3?s(l):n>3?s(e,i,l):s(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l};let H=class extends o.w3{constructor(...t){super(...t),(0,l.Z)(this,"state",this.$store.state.input),(0,l.Z)(this,"visualWidth",100),(0,l.Z)(this,"visualHeight",100),(0,l.Z)(this,"canvasEl",null),(0,l.Z)(this,"canvasCtx",null),(0,l.Z)(this,"audioCtx",new AudioContext),(0,l.Z)(this,"analyserNode",this.audioCtx.createAnalyser()),(0,l.Z)(this,"gainNode",new GainNode(this.audioCtx)),(0,l.Z)(this,"sourceNode",this.audioCtx.createBufferSource()),(0,l.Z)(this,"audioBuffer",null),(0,l.Z)(this,"isDisplayControlPanel",!0),(0,l.Z)(this,"isHoverVolume",!1)}onChangeStateVolume(){this.gainNode.gain.value=this.state.volume}onChangeCanvasWidth(){this.resizeCanvas()}mounted(){this.canvasEl=document.getElementById("visualiser-canvas"),this.canvasCtx=this.canvasEl.getContext("2d"),this.gainNode.gain.value=this.state.volume,this.resizeCanvas(),window.onresize=()=>{this.resizeCanvas()},window.onwheel=t=>{this.isHoverVolume&&(t.deltaY<0&&this.state.volume<1?this.state.volume+=.05:t.deltaY>0&&this.state.volume>0&&(this.state.volume-=.05))}}resizeCanvas(){this.visualWidth=window.innerWidth*this.state.canvasWidth,this.isDisplayControlPanel?this.visualHeight=window.innerHeight-150:this.visualHeight=window.innerHeight}inputVolume(t){const e=t.target;this.state.volume=parseFloat(e.value),this.gainNode.gain.value=this.state.volume}closeControlPanel(){this.isDisplayControlPanel=!1,this.resizeCanvas()}openControlPanel(){this.isDisplayControlPanel=!0,this.resizeCanvas()}initAudioInstances(){const t=this.gainNode.gain.value;this.audioCtx=new AudioContext,this.analyserNode=this.audioCtx.createAnalyser(),this.sourceNode=this.audioCtx.createBufferSource(),this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=t}async play(){if(null===this.state.audioFile)return void alert("音声ファイルが入力されていません");const t=this;this.initAudioInstances();const e=document.getElementById("audio-input");this.audioBuffer=null,this.audioBuffer=await this.audioCtx.decodeAudioData(await e.files[0].arrayBuffer()),this.sourceNode.buffer=this.audioBuffer,this.sourceNode.connect(this.analyserNode),this.sourceNode.connect(this.gainNode).connect(this.audioCtx.destination);let i=0;this.sourceNode.start(this.state.delayTime),console.log("started"),this.sourceNode.onended=()=>{console.log("ended"),cancelAnimationFrame(i),n.fillStyle="rgb(0, 0, 0)",n.clearRect(0,0,this.visualWidth,this.visualHeight),n.fillStyle="rgb(0, 0, 0, 0)",n.fillRect(0,0,this.visualWidth,this.visualHeight)},this.analyserNode.fftSize=1024;const a=this.analyserNode.frequencyBinCount,s=new Uint8Array(a),n=this.canvasCtx,l=this.analyserNode;function o(){i=requestAnimationFrame(o),"simple-bar"===t.state.visualiserType?S(n,l,a,s,t.visualWidth,t.visualHeight,t.state.barColor):"bold-bar"===t.state.visualiserType?T(n,l,a,s,t.visualWidth,t.visualHeight,t.state.barColor):"line-bar"===t.state.visualiserType?A(n,l,a,s,t.visualWidth,t.visualHeight,t.state.barColor):"curve-bar"===t.state.visualiserType&&R(n,l,a,s,t.visualWidth,t.visualHeight,t.state.barColor)}n.clearRect(0,0,this.visualWidth,this.visualHeight),o()}};j([(0,o.RL)("state.volume")],H.prototype,"onChangeStateVolume",null),j([(0,o.RL)("state.canvasWidth")],H.prototype,"onChangeCanvasWidth",null),H=j([(0,o.wA)({components:{BackgroundImage:D}})],H);var $=H,E=$,V=(0,m.Z)(E,b,C,!1,null,null,null),q=V.exports,M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.state.showInputs,expression:"state.showInputs"}],staticClass:"input-params"},[i("div",{staticClass:"mb-3 close-input"},[i("div",{staticClass:"cancel-icon-wrapper",on:{click:t.closeInputs}},[i("b-icon-x-lg")],1)]),i("div",{staticClass:"mb-3"},[i("label",{staticClass:"mb-1"},[t._v("背景画像")]),i("div",{staticClass:"file has-name"},[i("label",{staticClass:"file-label"},[i("input",{staticClass:"file-input",attrs:{type:"file",name:"resume",accept:"image/*"},on:{input:t.inputImage}}),t._m(0),i("span",{staticClass:"file-name"},[t._v(" "+t._s(t.state.imageFile?t.state.imageFile.name:"No Select")+" ")])])])]),i("div",{staticClass:"mb-3"},[i("label",{staticClass:"mb-1"},[t._v("再生音楽")]),i("div",{staticClass:"file has-name"},[i("label",{staticClass:"file-label"},[i("input",{staticClass:"file-input",attrs:{id:"audio-input",type:"file",name:"resume",accept:"audio/*"},on:{input:t.inputAudio}}),t._m(1),i("span",{staticClass:"file-name"},[t._v(" "+t._s(t.state.audioFile?t.state.audioFile.name:"No Select")+" ")])])])]),i("div",{staticClass:"mb-3"},[i("label",{staticClass:"mb-1"},[t._v("ビジュアライザーの種類")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.state.visualiserType,expression:"state.visualiserType"}],staticClass:"form-select",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.state,"visualiserType",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"simple-bar",selected:""}},[t._v("Simple Bar")]),i("option",{attrs:{value:"bold-bar"}},[t._v("Bold Bar")]),i("option",{attrs:{value:"line-bar"}},[t._v("Line Bar")]),i("option",{attrs:{value:"curve-bar"}},[t._v("Curve Bar")])])]),i("div",{staticClass:"mb-3"},[i("label",{staticClass:"mb-1"},[t._v("開始遅延")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.state.delayTime,expression:"state.delayTime"}],staticClass:"form-control",attrs:{type:"number",min:"0"},domProps:{value:t.state.delayTime},on:{input:function(e){e.target.composing||t.$set(t.state,"delayTime",e.target.value)}}})]),i("div",{staticClass:"mb-3 row py-2"},[i("label",{staticClass:"mb-1"},[t._v("音量")]),i("div",{staticClass:"col-1"},[i("b-icon-volume-down-fill")],1),i("div",{staticClass:"flex-column-center col-9"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.state.volume,expression:"state.volume"}],attrs:{type:"range",id:"volume-controller",min:"0",max:"1",step:"0.05"},domProps:{value:t.state.volume},on:{input:t.inputVolume,mouseover:function(e){t.isHoverVolume=!0},mouseleave:function(e){t.isHoverVolume=!1},__r:function(e){return t.$set(t.state,"volume",e.target.value)}}})]),i("div",{staticClass:"col-1"},[i("b-icon-volume-up-fill")],1)]),t._m(2),i("div",{staticClass:"mb-3"},[i("label",[t._v("ビジュアライザーの幅: "+t._s(parseInt(100*t.state.canvasWidth))+"%")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.state.canvasWidth,expression:"state.canvasWidth",modifiers:{number:!0}}],staticClass:"form-range",attrs:{type:"range",max:"1",min:"0",step:"0.01"},domProps:{value:t.state.canvasWidth},on:{__r:function(e){t.$set(t.state,"canvasWidth",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),i("div",{staticClass:"mb-3"},[i("label",{staticClass:"mb-1"},[t._v("画像の幅: "+t._s(parseInt(100*t.state.imageWidth))+"%")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.state.imageWidth,expression:"state.imageWidth",modifiers:{number:!0}}],staticClass:"form-range",attrs:{type:"range",max:"1",min:"0",step:"0.01"},domProps:{value:t.state.imageWidth},on:{__r:function(e){t.$set(t.state,"imageWidth",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),i("div",{staticClass:"mb-3"},[i("label",{staticClass:"mb-1"},[t._v("画像の幅の自動調整")]),i("div",[i("button",{staticClass:"btn btn-secondary",attrs:{disabled:!t.state.imageFile},on:{click:t.autoScale}},[t._v(" 画像幅の自動調整 ")])])])])},z=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"file-cta"},[i("span",{staticClass:"file-icon"},[i("i",{staticClass:"fas fa-upload"})]),i("span",{staticClass:"file-label"},[t._v(" Choose a file… ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"file-cta"},[i("span",{staticClass:"file-icon"},[i("i",{staticClass:"fas fa-upload"})]),i("span",{staticClass:"file-label"},[t._v(" Choose a file… ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mb-3"},[i("label",{staticClass:"mb-1"},[t._v("バーの色")]),i("div",{staticClass:"d-block"},[i("div",{attrs:{id:"color-picker"}})])])}],G=i(4638),L=i.n(G),Y=function(t,e,i,a){var s,n=arguments.length,l=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(l=(n<3?s(l):n>3?s(e,i,l):s(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l};const X={el:"#color-picker",theme:"classic",swatches:["rgba(244, 67, 54, 0.6)","rgba(103, 58, 183, 0.85)","rgba(63, 81, 181, 0.8)","rgba(0, 188, 212, 0.7)","rgba(33, 202, 111, 0.7)"],default:"#F5732499",components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,input:!0,save:!0}}};let J=class extends o.w3{constructor(...t){super(...t),(0,l.Z)(this,"state",this.$store.state.input),(0,l.Z)(this,"pickr",null),(0,l.Z)(this,"isHoverVolume",!1)}inputImage(t){const e=new FileReader,i=t.target;i.files?(this.state.imageFile=i.files[0],e.readAsDataURL(this.state.imageFile),e.onload=()=>{this.state.imageFileUrl=e.result}):this.state.imageFileUrl=""}autoScale(){if(this.state.imageFile){const t=new Image;t.onload=()=>{const e=t.naturalWidth,i=t.naturalHeight,a=window.innerWidth,s=window.innerHeight,n=e*s/(i*a);this.state.imageWidth=n>1?1:n,URL.revokeObjectURL(t.src)},t.src=URL.createObjectURL(this.state.imageFile)}}inputAudio(t){const e=t.target;e.files&&(this.state.audioFile=e.files[0])}closeInputs(){this.state.showInputs=!1}inputVolume(t){const e=t.target;this.state.volume=parseFloat(e.value)}mounted(){this.state.visualiserType="simple-bar",this.state.barColor="#F5732499",this.state.savedBarColor="#F5732499",this.state.showInputs=!0,o.w3.nextTick((()=>{this.pickr=L().create(X),this.pickr.on("save",(t=>{this.state.barColor=t.toRGBA().toString(),this.state.savedBarColor=t.toRGBA().toString(),this.pickr.hide()})),this.pickr.on("change",(t=>{this.state.barColor=t.toRGBA().toString()})),this.pickr.on("cancel",(()=>{this.state.barColor=this.state.savedBarColor})),this.pickr.on("hide",(()=>{this.state.barColor=this.state.savedBarColor}))})),window.onwheel=t=>{this.isHoverVolume&&(t.deltaY<0&&this.state.volume<1?this.state.volume+=.05:t.deltaY>0&&this.state.volume>0&&(this.state.volume-=.05))}}};J=Y([o.wA],J);var K=J,Q=K,tt=(0,m.Z)(Q,M,z,!1,null,"99ab91f2",null),et=tt.exports,it=function(t,e,i,a){var s,n=arguments.length,l=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(l=(n<3?s(l):n>3?s(e,i,l):s(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l};let at=class extends o.w3{constructor(...t){super(...t),(0,l.Z)(this,"inputState",this.$store.state.input),(0,l.Z)(this,"canvasEl",null)}async getAudioArrayBuffer(t){let e=u()(t,{responseType:"arraybuffer",method:"GET"});return e}};at=it([(0,o.wA)({components:{BasicAudioVisualiserTest:y,BasicAudioVisualiser:q,InputParams:et,BackgroundImage:D}})],at);var st=at,nt=st,lt=(0,m.Z)(nt,s,n,!1,null,"4bd65ec2",null),ot=lt.exports,rt=i(8262),ut=i(3266);i(44);a["default"].use(rt.XG7),a["default"].use(ut.A7),a["default"].config.productionTip=!1,new a["default"]({store:x,render:t=>t(ot)}).$mount("#app")}},e={};function i(a){var s=e[a];if(void 0!==s)return s.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,i),n.exports}i.m=t,function(){var t=[];i.O=function(e,a,s,n){if(!a){var l=1/0;for(c=0;c<t.length;c++){a=t[c][0],s=t[c][1],n=t[c][2];for(var o=!0,r=0;r<a.length;r++)(!1&n||l>=n)&&Object.keys(i.O).every((function(t){return i.O[t](a[r])}))?a.splice(r--,1):(o=!1,n<l&&(l=n));if(o){t.splice(c--,1);var u=s();void 0!==u&&(e=u)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[a,s,n]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,n,l=a[0],o=a[1],r=a[2],u=0;if(l.some((function(e){return 0!==t[e]}))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(r)var c=r(i)}for(e&&e(a);u<l.length;u++)n=l[u],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(c)},a=self["webpackChunkaudio_spectrum"]=self["webpackChunkaudio_spectrum"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998],(function(){return i(7899)}));a=i.O(a)})();
//# sourceMappingURL=app.9b43824f.js.map